1. 程序 A：核心架构、数值逻辑与叙事系统 (Core, Stats & Narrative)
你负责制定世界的运行规则，并控制玩家“能看到什么”和“能说什么”。
A1. 心理稳态数值管理器 (MentalStatsManager)
模块性质： 全局单例 (Singleton)。
核心数据： currentStress (应激度), currentDissociation (解离度)。

功能实现：
事件驱动修改 (Event-Driven)：
严禁使用 Update 进行随时间的数值增减。
提供 ModifyStress(int value) 接口，仅由明确事件（如：选中对话、吃药、小游戏结算、触发剧情）调用。
被动转化逻辑：
在 ModifyStress 被调用后，立即执行 RecalculateDissociation()。
算法依据：
当应激度处于不同区间时，线性或阶梯式改变解离度。
广播机制： 数据变动时触发 OnStatsChanged 事件，通知 UI 和渲染系统。

A2. 全栈对话系统 (DialogueSystem)
模块性质： 核心交互系统（涵盖数据、逻辑与UI）。

数据层：
配置工具： 编写 Excel/CSV 导入工具，生成 DialogueData (ScriptableObject)。
字段定义： 包含 Content, NextID, StressModifier (对应激度的修正), Threshold (解锁该选项需要的应激度上限/下限)。

逻辑层 (Option Filter)：
在显示选项前，读取 A1 的 currentStress。
认知干预： if (currentStress > option.Threshold) option.IsHidden = true; (实现高压下屏蔽冷静选项)。

表现层 (UI)：
基础功能： 打字机效果 (Typewriter)、跳过、历史记录。

A3. 世界状态与转化控制器 (WorldStateManager)
模块性质： 场景流转控制。

转化判定逻辑：
编写 TrySwitchWorld(InteractionType type) 接口供程序 B 调用。

判定规则：
床交互： if (type == Bed && currentDissociation > 90) -> 进入 意识世界。
床交互： if (type == Bed && currentDissociation < 10) -> 进入 现实世界。
药物交互： if (type == Drug) -> 强制切换（根据药物定义直接跳转）。


剧情强制： 监听 OnMemoryPlaybackEnd (记忆播放结束) -> 强制跳转至 意识世界。
视觉反馈 (VisualFeedback)：
对接 Unity Post-processing。
灰度控制： 监听解离度变化，实时修改 ColorGrading.saturation。
算法： Saturation = Mathf.Lerp(0, -100, currentDissociation / 100f); (解离度越高，画面越灰)。
